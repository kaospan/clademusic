import{c as $,r as j,j as e,m as p,M as f}from"./index-DFa70ott.js";import{B as I}from"./BottomNav-Dy_vNsjq.js";import{C as P,P as R}from"./ProfileCircle-B-ffb8UH.js";import{C as N}from"./ChordBadge-WUDU_VoE.js";import{L as D}from"./TrackLineageView-VpXUk-fA.js";import{s as h}from"./seedTracks-B6rAh97_.js";import{S as y,a as v,b as _,c as w,d as b}from"./select-D9QZPps9.js";import{C as E}from"./check-C5NJttp1.js";import{S as G}from"./sparkles-B866zwF1.js";import{K as C,R as S}from"./rotate-ccw-Ce-57UmU.js";import"./menu-CzBgYhZ9.js";import"./search-RmY3zwyn.js";import"./user-DSIUSqRV.js";import"./card-DPwZnFEZ.js";import"./badge-LvBTHt44.js";import"./arrow-right-ltA4Aj5d.js";import"./index-cs4da-di.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=$("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);function K(s,r){if(!s.progression_roman||!r.progression_roman)return 0;const t=s.progression_roman.map(i=>i.toLowerCase()),c=r.progression_roman.map(i=>i.toLowerCase()),n=t.filter(i=>c.includes(i)).length,l=new Set([...t,...c]).size,o=(i,u)=>{const g=[];for(let x=0;x<=i.length-u;x++)g.push(i.slice(x,x+u).join("-"));return g},m=o(t,2),a=o(c,2),d=m.filter(i=>a.includes(i)).length,L=Math.max(m.length,a.length)||1,M=n/l,z=d/L,A=1-Math.abs(t.length-c.length)*.1,B=s.detected_mode===r.detected_mode?.1:0,T=(M*.3+z*.5+B)*Math.max(.5,A);return Math.min(100,Math.round(T*100))}function U(s,r){if(!s.progression_roman||!r.progression_roman)return"Unable to compare - missing chord data";const t=s.progression_roman,c=r.progression_roman,n=t.filter(o=>c.map(m=>m.toLowerCase()).includes(o.toLowerCase()));if(n.length===0)return"No shared chords, different harmonic language";const l=[];return n.length===t.length&&n.length===c.length?l.push("Identical chord vocabulary"):l.push(`${n.length} shared chord(s): ${n.join(", ")}`),s.detected_mode===r.detected_mode&&s.detected_mode?l.push(`Both in ${s.detected_mode}`):s.detected_mode&&r.detected_mode&&l.push(`Different modes (${s.detected_mode} vs ${r.detected_mode})`),s.cadence_type===r.cadence_type&&s.cadence_type!=="none"&&l.push(`Same ${s.cadence_type} cadence`),l.join(". ")}function ie(){var o,m;const[s,r]=j.useState(null),[t,c]=j.useState(null),n=s&&t?K(s,t):null,l=s&&t?U(s,t):null;return e.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 glass-strong safe-top",children:e.jsxs("div",{className:"px-4 py-4 max-w-lg mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{size:22,className:"text-primary"}),e.jsx("h1",{className:"text-xl font-bold",children:"Compare"})]}),e.jsx(R,{})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compare the harmonic DNA of two songs"})]})}),e.jsxs("main",{className:"px-4 py-4 max-w-lg mx-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Track A"}),e.jsxs(y,{value:s==null?void 0:s.id,onValueChange:a=>r(h.find(d=>d.id===a)||null),children:[e.jsx(v,{className:"bg-muted/50",children:e.jsx(_,{placeholder:"Select track"})}),e.jsx(w,{children:h.map(a=>e.jsx(b,{value:a.id,children:e.jsx("span",{className:"truncate",children:a.title})},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Track B"}),e.jsxs(y,{value:t==null?void 0:t.id,onValueChange:a=>c(h.find(d=>d.id===a)||null),children:[e.jsx(v,{className:"bg-muted/50",children:e.jsx(_,{placeholder:"Select track"})}),e.jsx(w,{children:h.map(a=>e.jsx(b,{value:a.id,children:e.jsx("span",{className:"truncate",children:a.title})},a.id))})]})]})]}),s&&t&&e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"text-center py-6",children:e.jsxs("div",{className:"inline-flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[s.cover_url&&e.jsx("img",{src:s.cover_url,alt:"",className:"w-16 h-16 rounded-xl object-cover mb-2"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-20",children:s.title})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs(p.div,{initial:{scale:.5},animate:{scale:1},className:"relative",children:[e.jsx("div",{className:"w-20 h-20 rounded-full glass-strong flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold gradient-text",children:[n,"%"]})}),n!==null&&n>=70&&e.jsx(p.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center",children:e.jsx(E,{className:"w-4 h-4 text-primary-foreground"})})]}),e.jsx("span",{className:"text-xs text-muted-foreground mt-2",children:"Similarity"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[t.cover_url&&e.jsx("img",{src:t.cover_url,alt:"",className:"w-16 h-16 rounded-xl object-cover mb-2"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-20",children:t.title})]})]})}),l&&e.jsxs("div",{className:"p-4 glass rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-primary",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium text-sm",children:"Analysis"})]}),e.jsx("p",{className:"text-sm text-foreground",children:l})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-sm",children:s.artist}),e.jsxs("div",{className:"p-3 glass rounded-xl space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(C,{className:"w-3 h-3"}),e.jsxs("span",{children:[s.detected_key||"?"," ",s.detected_mode||""]})]}),s.cadence_type&&s.cadence_type!=="none"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{className:"capitalize",children:s.cadence_type})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(f,{className:"w-3 h-3"}),e.jsxs("span",{children:[((o=s.progression_roman)==null?void 0:o.length)||0," chords"]})]})]}),s.progression_roman&&e.jsx("div",{className:"flex flex-wrap gap-1",children:s.progression_roman.map((a,d)=>e.jsx(N,{chord:a,size:"sm"},d))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-medium text-sm",children:t.artist}),e.jsxs("div",{className:"p-3 glass rounded-xl space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(C,{className:"w-3 h-3"}),e.jsxs("span",{children:[t.detected_key||"?"," ",t.detected_mode||""]})]}),t.cadence_type&&t.cadence_type!=="none"&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(S,{className:"w-3 h-3"}),e.jsx("span",{className:"capitalize",children:t.cadence_type})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(f,{className:"w-3 h-3"}),e.jsxs("span",{children:[((m=t.progression_roman)==null?void 0:m.length)||0," chords"]})]})]}),t.progression_roman&&e.jsx("div",{className:"flex flex-wrap gap-1",children:t.progression_roman.map((a,d)=>e.jsx(N,{chord:a,size:"sm"},d))})]})]}),s.id&&t.id&&e.jsx(D,{startId:s.id,endId:t.id})]}),(!s||!t)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted/50 mb-4",children:e.jsx(V,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("p",{className:"text-muted-foreground",children:"Select two tracks to compare their harmonic structure"})]})]}),e.jsx(I,{})]})}export{ie as default};
