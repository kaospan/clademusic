import{j as e,a as n,k as f,l,p as h,q as m,u as y,r as j,n as o,N as g,O as k,T as b}from"./index-BeSjWW7X.js";import{U as w}from"./user-BHP38zOT.js";function M({className:r="",size:t=16}){return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,"aria-label":"Common Ancestor - Influential Track",children:[e.jsx("path",{d:"M8 14V8M8 8L5 6M8 8L11 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"5",cy:"4",r:"1.5",fill:"currentColor"}),e.jsx("circle",{cx:"11",cy:"4",r:"1.5",fill:"currentColor"}),e.jsx("circle",{cx:"8",cy:"14",r:"1.5",fill:"currentColor"}),e.jsx("path",{d:"M8 2L8.5 3.5L10 4L8.5 4.5L8 6L7.5 4.5L6 4L7.5 3.5L8 2Z",fill:"currentColor",opacity:"0.6"})]})}function G({className:r="",size:t=32}){return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:r,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"cladeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))"}),e.jsx("stop",{offset:"100%",stopColor:"hsl(var(--accent))"})]})}),e.jsxs("g",{className:"animate-pulse-subtle",children:[e.jsx("path",{d:"M16 28V16",stroke:"url(#cladeGradient)",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M16 16C16 16 11 13 7 13M16 16C16 16 21 13 25 13",stroke:"url(#cladeGradient)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M7 13V7M25 13V7",stroke:"url(#cladeGradient)",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("circle",{cx:"7",cy:"5",r:"3",fill:"url(#cladeGradient)"}),e.jsx("circle",{cx:"25",cy:"5",r:"3",fill:"url(#cladeGradient)"}),e.jsx("circle",{cx:"16",cy:"28",r:"3",fill:"url(#cladeGradient)"}),e.jsx("path",{d:"M7 10C7 10 4 9 2 9M25 10C25 10 28 9 30 9",stroke:"url(#cladeGradient)",strokeWidth:"2",strokeLinecap:"round",opacity:"0.6"}),e.jsx("circle",{cx:"2",cy:"8",r:"2",fill:"url(#cladeGradient)",opacity:"0.7"}),e.jsx("circle",{cx:"30",cy:"8",r:"2",fill:"url(#cladeGradient)",opacity:"0.7"})]})]})}function v(){const{user:r}=n();return f({queryKey:["profile",r==null?void 0:r.id],queryFn:async()=>{if(!r)return null;const{data:t,error:a}=await l.from("profiles").select("*").eq("id",r.id).single();if(a)throw a;return t},enabled:!!r})}function q(){const{user:r}=n();return f({queryKey:["user-providers",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const{data:t,error:a}=await l.from("user_providers").select("*").eq("user_id",r.id).order("connected_at",{ascending:!1});if(a)throw a;return t},enabled:!!r})}function N(){const{user:r}=n(),t=h();return m({mutationFn:async a=>{if(!r)throw new Error("Not authenticated");const{data:s,error:i}=await l.from("profiles").update({preferred_provider:a}).eq("id",r.id).select().single();if(i)throw i;return s},onSuccess:()=>{t.invalidateQueries({queryKey:["profile"]})}})}const u={sm:"h-7 w-7 text-xs",md:"h-9 w-9 text-sm",lg:"h-11 w-11 text-base"};function A({className:r,size:t="md"}){const a=y(),{user:s}=n(),{data:i}=v(),x=j.useMemo(()=>{var d;const c=(s==null?void 0:s.email)||"";return c?(d=c[0])==null?void 0:d.toUpperCase():"U"},[s==null?void 0:s.email]),p=()=>{a(s?"/profile":"/auth")};return e.jsx("button",{type:"button",onClick:p,className:o("inline-flex items-center justify-center rounded-full border border-border/60 bg-background/60 hover:bg-background/80 transition",r),"aria-label":s?"Open profile":"Sign in",title:s?"Profile":"Sign in",children:s?e.jsxs(g,{className:o(u[t],"border border-border/60"),children:[e.jsx(k,{src:(i==null?void 0:i.avatar_url)||void 0}),e.jsx(b,{className:"bg-primary/15 text-primary font-semibold",children:x})]}):e.jsx("span",{className:o(u[t],"inline-flex items-center justify-center"),children:e.jsx(w,{className:"h-4 w-4"})})})}export{M as A,G as C,A as P,q as a,N as b,v as u};
