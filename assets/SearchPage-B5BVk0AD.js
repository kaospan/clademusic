import{c as pe,u as fe,a as ye,k as ge,l as je,e as ve,r as n,s as b,n as ee,R as Ne,o as be,j as s,B as x,M as $,m as j,X as D,p as we,h as Ce,Q as O}from"./index-D1ZyfTQn.js";import{B as Se}from"./BottomNav-CyU9QGAt.js";import{C as se}from"./ChordBadge-D23RKBMD.js";import{I as _e}from"./input-DyigOj9c.js";import{B as v}from"./badge-BAojJqpR.js";import{n as te}from"./navigation-PB9wrqL7.js";import{R as ie}from"./ResponsiveLayout-Cpbued0O.js";import{C as Ie}from"./CladeIcon-BSW0Sh4G.js";import{P as Te}from"./ProfileCircle-BTkr63G8.js";import{T as re}from"./trending-up-BgkrvKck.js";import{S as le}from"./search-DtWV6u2X.js";import{A as ze}from"./index-CDeeNjX0.js";import{Z as ae}from"./zap-c6hhRoL0.js";import{H as oe}from"./heart-D0oSVLlb.js";import{S as Ae}from"./sparkles-CFVd8EGo.js";import{C as Le}from"./clock-5wlP_uv0.js";import{A}from"./arrow-right-CQyswv4c.js";import{E as Pe}from"./external-link-BaRTtgdo.js";import"./CladeWordmark-COCD_MEa.js";import"./menu-CSze8H4A.js";import"./user-Ck2z_n_7.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Z="clade_search_history",Fe=20;function L(){try{const c=localStorage.getItem(Z);return c?JSON.parse(c).sort((u,y)=>y.timestamp-u.timestamp):[]}catch(c){return console.error("Error loading search history:",c),[]}}function Ee(c){try{const o=L();if(o.slice(0,5).some(l=>l.query.toLowerCase()===c.query.toLowerCase()&&l.type===c.type))return;const g=[{...c,id:`${Date.now()}-${Math.random()}`,timestamp:Date.now()},...o].slice(0,Fe);localStorage.setItem(Z,JSON.stringify(g))}catch(o){console.error("Error saving search history:",o)}}function Re(c){try{const u=L().filter(y=>y.id!==c);localStorage.setItem(Z,JSON.stringify(u))}catch(o){console.error("Error removing from search history:",o)}}function rs(){const c=fe(),{user:o}=ye(),{data:u}=ge(),y=je(),{openPlayer:g}=ve(),[l,M]=n.useState(""),[d,Y]=n.useState("song"),[N,P]=n.useState([]),[ne,W]=n.useState(0),[q,w]=n.useState(0),[C,k]=n.useState([]),[F,E]=n.useState(!1),[Q,V]=n.useState([]),[p,S]=n.useState([]),[m,R]=n.useState("all"),[h,B]=n.useState("all"),[G,ce]=n.useState(!1);n.useEffect(()=>{V(L())},[]),n.useEffect(()=>{console.log("ðŸ” SearchPage mounted"),console.log("ðŸ“Š seedTracks count:",b.length),console.log("ðŸ“¦ First track:",b[0])},[]),n.useEffect(()=>{if(d!=="song"||!l.trim()||!o||!u){P([]),W(0),w(0);return}w(0);const e=setTimeout(async()=>{E(!0);try{const{tracks:t,total:i}=await ee(o.id,l,50,0);P(t),W(i),w(t.length)}catch(t){console.error("Spotify search error:",t),P([]),W(0),w(0)}finally{E(!1)}},300);return()=>clearTimeout(e)},[l,d,o,u]);const de=Ne.useCallback(async()=>{if(o){E(!0);try{const{tracks:e,total:t}=await ee(o.id,l,50,q);P(i=>[...i,...e]),W(t),w(i=>i+e.length)}catch(e){console.error("Spotify load-more error:",e)}finally{E(!1)}}},[o,l,q]);n.useEffect(()=>{let e=!1;if(d!=="song"||!l.trim()||u){k([]);return}const t=setTimeout(async()=>{try{const i=await be(l,"");if(e)return;const r=i.map(a=>({id:`youtube:${a.videoId}`,title:a.title,artist:a.channel,youtube_id:a.videoId,provider:"youtube"}));k(r)}catch(i){console.error("YouTube search error:",i),k([])}},300);return()=>{e=!0,clearTimeout(t)}},[l,d,u]);const _=n.useMemo(()=>{let e=[];if(d==="song"){const t=l.toLowerCase();e=b.filter(i=>{var r,a,f,T,z;return!l.trim()||((r=i.title)==null?void 0:r.toLowerCase().includes(t))||((a=i.artist)==null?void 0:a.toLowerCase().includes(t))||((f=i.album)==null?void 0:f.toLowerCase().includes(t))||((T=i.genre)==null?void 0:T.toLowerCase().includes(t))||((z=i.genre_description)==null?void 0:z.toLowerCase().includes(t))})}else{const t=l.toUpperCase().split(/[-â€“â€”,\s]+/).map(i=>i.trim()).filter(Boolean);e=b.filter(i=>{if(!i.progression_roman)return!1;const r=i.progression_roman.map(a=>a.toUpperCase());return t.length===0||t.every(a=>r.includes(a)||r.includes(a.toLowerCase()))})}if(p.length>0&&(e=e.filter(t=>{const i=[t.genre,...t.genres||[]].filter(Boolean).map(r=>r==null?void 0:r.toLowerCase());return p.some(r=>i.some(a=>a==null?void 0:a.includes(r.toLowerCase())))})),m!=="all"&&(e=e.filter(t=>typeof t.energy!="number"?!1:m==="high"?t.energy>.7:m==="medium"?t.energy>=.4&&t.energy<=.7:m==="low"?t.energy<.4:!0)),h!=="all"&&(e=e.filter(t=>typeof t.valence!="number"?!1:h==="happy"?t.valence>.6:h==="sad"?t.valence<.4:h==="neutral"?t.valence>=.4&&t.valence<=.6:!0)),l.trim()&&d==="song"){const t=l.toLowerCase();return e.sort((i,r)=>{var U,J,X,K;const a=((U=i.title)==null?void 0:U.toLowerCase())||"",f=((J=r.title)==null?void 0:J.toLowerCase())||"",T=((X=i.artist)==null?void 0:X.toLowerCase())||"",z=((K=r.artist)==null?void 0:K.toLowerCase())||"";return a.startsWith(t)&&!f.startsWith(t)?-1:!a.startsWith(t)&&f.startsWith(t)?1:T.startsWith(t)&&!z.startsWith(t)?-1:!T.startsWith(t)&&z.startsWith(t)?1:0})}return e},[l,d,p,m,h]),ue=e=>{if(!e)return null;if(e.startsWith("spotify:track:")||e.startsWith("spotify:"))return e.split(":").pop()||null;const t=e.match(/track\/([A-Za-z0-9]+)/);return t!=null&&t[1]?t[1]:e.includes("?")?e.split("?")[0].split("/").pop()||null:e},me=e=>{if(!e)return null;const t=e.trim();if(t.startsWith("youtube:")){const a=t.split(":").pop()||"";if(/^[A-Za-z0-9_-]{11}$/.test(a))return a}if(/^[A-Za-z0-9_-]{11}$/.test(t))return t;const i=t.match(/youtu\.be\/([A-Za-z0-9_-]{11})/);if(i!=null&&i[1])return i[1];const r=t.match(/[?&]v=([A-Za-z0-9_-]{11})/);return r!=null&&r[1]?r[1]:null},H=(e,t)=>{t==null||t.stopPropagation();const i=e.id||e.spotify_id||e.external_id;i&&te(c,i)},I=e=>{var a,f;l.trim()&&(Ee({query:l.trim(),type:d,track:d==="song"?e:void 0}),V(L()));const t=ue(e.spotify_id||((a=e.id)!=null&&a.startsWith("spotify:")?e.id:null)||e.url_spotify_web||e.url_spotify_app||null),i=me(e.youtube_id||((f=e.id)!=null&&f.startsWith("youtube:")?e.id:null)||e.url_youtube||null);if(e.provider==="youtube"&&i){g({canonicalTrackId:e.id,provider:"youtube",providerTrackId:i,autoplay:!0,context:"search-result",title:e.title,artist:e.artist});return}if(e.provider==="spotify"&&t){if(!o){c("/auth");return}if(u!==!0){y.mutateAsync();return}g({canonicalTrackId:e.id,provider:"spotify",providerTrackId:t,autoplay:!0,context:"search-result",title:e.title,artist:e.artist});return}if(t&&o&&u===!0){g({canonicalTrackId:e.id,provider:"spotify",providerTrackId:t,autoplay:!0,context:"search-result",title:e.title,artist:e.artist});return}if(i){g({canonicalTrackId:e.id,provider:"youtube",providerTrackId:i,autoplay:!0,context:"search-result",title:e.title,artist:e.artist});return}if(t){if(!o){c("/auth");return}if(u!==!0){y.mutateAsync();return}g({canonicalTrackId:e.id,provider:"spotify",providerTrackId:t,autoplay:!0,context:"search-result",title:e.title,artist:e.artist});return}const r=e.id||e.spotify_id||e.external_id;r&&te(c,r)},he=(e,t)=>{t.stopPropagation(),Re(e),V(L())},xe=e=>{e.track?I(e.track):(M(e.query),Y(e.type))};return s.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[s.jsx("header",{className:"sticky top-0 z-40 glass-strong safe-top",children:s.jsx(ie,{maxWidth:"full",children:s.jsxs("div",{className:"py-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between pl-36 sm:pl-44",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ie,{size:22,className:"text-primary"}),s.jsx("h1",{className:"text-xl lg:text-2xl font-bold",children:"Search"})]}),s.jsx(Te,{})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(x,{variant:d==="song"?"default":"outline",size:"sm",onClick:()=>Y("song"),className:"flex-1",children:[s.jsx($,{className:"w-4 h-4 mr-1.5"}),s.jsx("span",{className:"hidden sm:inline",children:"Song / Artist"}),s.jsx("span",{className:"sm:hidden",children:"Song"})]}),s.jsxs(x,{variant:d==="chord"?"default":"outline",size:"sm",onClick:()=>Y("chord"),className:"flex-1",children:[s.jsx(re,{className:"w-4 h-4 mr-1.5"}),s.jsx("span",{className:"hidden sm:inline",children:"Chord Progression"}),s.jsx("span",{className:"sm:hidden",children:"Chords"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(le,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(_e,{placeholder:d==="song"?"Search songs or artists...":"e.g., vi-IV-I-V or I-V-vi-IV",value:l,onChange:e=>M(e.target.value),className:"pl-10 bg-muted/50",autoFocus:!0})]}),s.jsxs(x,{variant:"outline",size:"sm",onClick:()=>ce(!G),className:"w-full",children:[s.jsx(We,{className:"w-4 h-4 mr-2"}),"Filters",(p.length>0||m!=="all"||h!=="all")&&s.jsx(v,{variant:"secondary",className:"ml-2",children:p.length+(m!=="all"?1:0)+(h!=="all"?1:0)})]}),s.jsx(ze,{children:G&&s.jsx(j.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:s.jsxs("div",{className:"space-y-4 pt-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx($,{className:"w-4 h-4"}),"Genre",p.length>0&&s.jsx(x,{variant:"ghost",size:"sm",onClick:()=>S([]),className:"h-6 text-xs",children:"Clear"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["pop","rock","hip hop","r&b","jazz","funk","soul","blues","country","disco","synthpop","reggae","punk"].map(e=>s.jsx(v,{variant:p.includes(e)?"default":"outline",className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{S(t=>t.includes(e)?t.filter(i=>i!==e):[...t,e])},children:e},e))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(ae,{className:"w-4 h-4"}),"Energy"]}),s.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"All"},{value:"high",label:"High Energy"},{value:"medium",label:"Medium"},{value:"low",label:"Chill"}].map(e=>s.jsx(v,{variant:m===e.value?"default":"outline",className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>R(e.value),children:e.label},e.value))})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[s.jsx(oe,{className:"w-4 h-4"}),"Mood"]}),s.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"All",icon:Ae},{value:"happy",label:"Happy",icon:"ðŸ˜Š"},{value:"neutral",label:"Neutral",icon:"ðŸ˜"},{value:"sad",label:"Melancholic",icon:"ðŸ˜¢"}].map(e=>s.jsxs(v,{variant:h===e.value?"default":"outline",className:"cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>B(e.value),children:[typeof e.icon=="string"?e.icon:""," ",e.label]},e.value))})]})]})})})]})})}),s.jsx("main",{className:"py-4 space-y-6",children:s.jsxs(ie,{maxWidth:"full",children:[!l&&Q.length>0&&s.jsxs("section",{children:[s.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground mb-3 flex items-center gap-2",children:[s.jsx(Le,{className:"w-4 h-4"}),"Recent Searches"]}),s.jsx("div",{className:"space-y-2",children:Q.slice(0,10).map((e,t)=>s.jsx(j.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.03},onClick:()=>xe(e),className:"p-3 glass rounded-lg cursor-pointer hover:bg-muted/50 transition-colors group",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-muted/50 flex items-center justify-center flex-shrink-0",children:e.type==="song"?s.jsx($,{className:"w-4 h-4 text-muted-foreground"}):s.jsx(re,{className:"w-4 h-4 text-muted-foreground"})}),s.jsx("div",{className:"flex-1 min-w-0",children:e.track?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium truncate",children:e.track.title}),s.jsx("div",{className:"text-sm text-muted-foreground truncate",children:e.track.artist})]}):s.jsx("div",{className:"font-medium",children:e.query})}),s.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:i=>he(e.id,i),children:s.jsx(D,{className:"w-4 h-4"})})]})},e.id))})]}),d==="chord"&&!l&&s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Popular Progressions"}),s.jsx("div",{className:"space-y-2",children:we.slice(0,5).map((e,t)=>s.jsxs(j.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.05},onClick:()=>M(e.progression.join("-")),className:"w-full p-4 glass rounded-xl text-left group hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium",children:e.name}),s.jsx(A,{className:"w-4 h-4 text-muted-foreground group-hover:text-foreground transition-colors"})]}),s.jsx("div",{className:"flex gap-1.5 flex-wrap",children:e.progression.map((i,r)=>s.jsx(se,{chord:i,size:"sm"},r))}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:e.description})]},e.name))})]}),l&&N.length===0&&C.length===0&&_.length===0&&!F&&s.jsx("section",{children:s.jsxs("div",{className:"glass rounded-2xl p-8 text-center space-y-4",children:[s.jsx("div",{className:"w-20 h-20 rounded-full bg-muted/50 flex items-center justify-center mx-auto",children:s.jsx(le,{className:"w-10 h-10 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-semibold mb-2",children:['No results for "',l,'"']}),p.length>0||m!=="all"||h!=="all"?s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"No tracks match your search with the selected filters"}),s.jsx(x,{variant:"outline",size:"sm",onClick:()=>{S([]),R("all"),B("all")},children:"Clear Filters"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:["Searched ",b.length," tracks with chord progressions"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:'Try searching for artist names like "weeknd" or chord progressions like "vi-IV-I-V"'})]})]}),!u&&s.jsxs("div",{className:"glass-strong rounded-xl p-6 space-y-3 mt-6",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 text-[#1DB954]",children:[s.jsx(Pe,{className:"w-5 h-5"}),s.jsx("span",{className:"font-semibold",children:"Unlock unlimited search"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect Spotify to search millions of songs beyond the local database"}),s.jsx(x,{onClick:()=>c("/profile"),className:"w-full bg-[#1DB954] hover:bg-[#1ed760] text-white",size:"lg",children:"Connect Spotify"})]})]})}),(N.length>0||C.length>0||_.length>0)&&s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h2",{className:"text-sm font-semibold text-muted-foreground flex items-center gap-2 flex-wrap",children:["Results (",N.length+C.length+_.length,")",F&&s.jsx(Ce,{className:"w-3 h-3 animate-spin"}),N.length>0&&s.jsx("span",{className:"text-[#1DB954] text-xs",children:"via Spotify"}),C.length>0&&s.jsx("span",{className:"text-xs text-red-500",children:"via YouTube"}),_.length>0&&s.jsx("span",{className:"text-xs text-purple-500",children:"via Local DB"})]}),(p.length>0||m!=="all"||h!=="all")&&s.jsx(x,{variant:"ghost",size:"sm",onClick:()=>{S([]),R("all"),B("all")},className:"h-7 text-xs",children:"Clear Filters"})]}),(p.length>0||m!=="all"||h!=="all")&&s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[p.map(e=>s.jsxs(v,{variant:"secondary",className:"text-xs",children:[e,s.jsx(D,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>S(t=>t.filter(i=>i!==e))})]},e)),m!=="all"&&s.jsxs(v,{variant:"secondary",className:"text-xs",children:[s.jsx(ae,{className:"w-3 h-3 mr-1"}),m," energy",s.jsx(D,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>R("all")})]}),h!=="all"&&s.jsxs(v,{variant:"secondary",className:"text-xs",children:[s.jsx(oe,{className:"w-3 h-3 mr-1"}),h,s.jsx(D,{className:"w-3 h-3 ml-1 cursor-pointer",onClick:()=>B("all")})]})]}),s.jsxs("div",{className:"space-y-2",children:[N.map((e,t)=>s.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.03},className:"p-4 glass rounded-xl cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>I(e),children:s.jsxs("div",{className:"flex gap-4",children:[e.cover_url&&s.jsx("img",{src:e.cover_url,alt:"",className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium truncate",children:e.title}),s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.artist}),e.album&&s.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:e.album})]}),s.jsxs("div",{className:"flex items-center gap-2",onClick:i=>i.stopPropagation(),children:[s.jsx(x,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full",onClick:i=>H(e,i),title:"Details","aria-label":`Open details for ${e.title}`,children:s.jsx(A,{className:"w-5 h-5"})}),s.jsx(O,{track:{spotifyId:e.spotify_id??e.id,youtubeId:e.youtube_id,urlSpotifyWeb:e.url_spotify_web},canonicalTrackId:e.id,trackTitle:e.title,trackArtist:e.artist,size:"md"})]})]})},e.id)),N.length<ne&&s.jsx("div",{className:"flex justify-center py-2",children:s.jsx(x,{variant:"outline",size:"sm",onClick:de,disabled:F,children:F?"Loadingâ€¦":"Load more Spotify results"})}),C.map((e,t)=>s.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.03},className:"p-4 glass rounded-xl cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>I(e),children:s.jsxs("div",{className:"flex gap-4",children:[e.cover_url&&s.jsx("img",{src:e.cover_url,alt:"",className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium truncate",children:e.title}),s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.artist})]}),s.jsxs("div",{className:"flex items-center gap-2",onClick:i=>i.stopPropagation(),children:[s.jsx(x,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full",onClick:i=>H(e,i),title:"Details","aria-label":`Open details for ${e.title}`,children:s.jsx(A,{className:"w-5 h-5"})}),s.jsx(O,{track:{youtubeId:e.youtube_id,spotifyId:e.spotify_id,urlYoutube:e.url_youtube},canonicalTrackId:e.id,trackTitle:e.title,trackArtist:e.artist,size:"md"})]})]})},e.id)),_.map((e,t)=>s.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.03},className:"p-4 glass rounded-xl cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>I(e),children:s.jsxs("div",{className:"flex gap-4",children:[e.cover_url&&s.jsx("img",{src:e.cover_url,alt:"",className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium truncate",children:e.title}),s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.artist}),e.progression_roman&&s.jsx("div",{className:"flex gap-1 mt-2 flex-wrap",children:e.progression_roman.map((i,r)=>s.jsx(se,{chord:i,size:"sm",keySignature:e.detected_key},r))})]}),s.jsxs("div",{className:"flex items-center gap-2",onClick:i=>i.stopPropagation(),children:[s.jsx(x,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full",onClick:i=>H(e,i),title:"Details","aria-label":`Open details for ${e.title}`,children:s.jsx(A,{className:"w-5 h-5"})}),s.jsx(O,{track:{spotifyId:e.spotify_id,youtubeId:e.youtube_id,urlYoutube:e.url_youtube,urlSpotifyWeb:e.url_spotify_web},canonicalTrackId:e.id,trackTitle:e.title,trackArtist:e.artist,size:"md",className:"justify-end"})]})]})},e.id))]})]}),!l&&d==="song"&&s.jsxs("section",{children:[s.jsx("h2",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Trending Tracks"}),s.jsx("div",{className:"space-y-2",children:b.slice(0,10).map((e,t)=>s.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.03},className:"p-4 glass rounded-xl cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>I(e),children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex items-center justify-center w-8 text-lg font-bold text-muted-foreground",children:t+1}),e.cover_url&&s.jsx("img",{src:e.cover_url,alt:"",className:"w-12 h-12 rounded-lg object-cover"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-medium truncate",children:e.title}),s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:e.artist})]}),s.jsxs("div",{className:"flex items-center gap-2",onClick:i=>i.stopPropagation(),children:[s.jsx(x,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full",onClick:i=>H(e,i),title:"Details","aria-label":`Open details for ${e.title}`,children:s.jsx(A,{className:"w-4 h-4"})}),s.jsx(O,{track:{spotifyId:e.spotify_id,youtubeId:e.youtube_id,urlYoutube:e.url_youtube,urlSpotifyWeb:e.url_spotify_web},canonicalTrackId:e.id,trackTitle:e.title,trackArtist:e.artist,size:"sm"})]})]})},e.id))})]})]})}),s.jsx(Se,{})]})}export{rs as default};
