import{j as r,a as i,o as x,q as a,w as p,x as m,u as j,r as y,t as c,V as C,W as k,Y as w}from"./index-BI1c75bT.js";import{U as g}from"./user-DgOSVfW9.js";function M({className:e="",size:t=16}){return r.jsxs("svg",{width:t,height:t,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,"aria-label":"Common Ancestor - Influential Track",children:[r.jsx("path",{d:"M8 14V8M8 8L5 6M8 8L11 6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("circle",{cx:"5",cy:"4",r:"1.5",fill:"currentColor"}),r.jsx("circle",{cx:"11",cy:"4",r:"1.5",fill:"currentColor"}),r.jsx("circle",{cx:"8",cy:"14",r:"1.5",fill:"currentColor"}),r.jsx("path",{d:"M8 2L8.5 3.5L10 4L8.5 4.5L8 6L7.5 4.5L6 4L7.5 3.5L8 2Z",fill:"currentColor",opacity:"0.6"})]})}function q({className:e="",size:t=32}){return r.jsxs("svg",{width:t,height:t,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,"aria-hidden":"true",children:[r.jsx("path",{d:"M20 9A8 8 0 1 0 20 23",stroke:"currentColor",strokeWidth:"2.4",strokeLinecap:"round"}),r.jsx("path",{d:"M22.5 11L27 8.5M22.5 16L27 16M22.5 21L27 23.5",stroke:"currentColor",strokeWidth:"2.4",strokeLinecap:"round"}),r.jsx("path",{d:"M9.5 11L5 8.5M9.5 16L5 16M9.5 21L5 23.5",stroke:"currentColor",strokeWidth:"2.4",strokeLinecap:"round"}),r.jsx("circle",{cx:"27",cy:"8.5",r:"1.8",fill:"currentColor"}),r.jsx("circle",{cx:"27",cy:"16",r:"1.8",fill:"currentColor"}),r.jsx("circle",{cx:"27",cy:"23.5",r:"1.8",fill:"currentColor"}),r.jsx("circle",{cx:"5",cy:"8.5",r:"1.8",fill:"currentColor"}),r.jsx("circle",{cx:"5",cy:"16",r:"1.8",fill:"currentColor"}),r.jsx("circle",{cx:"5",cy:"23.5",r:"1.8",fill:"currentColor"}),r.jsx("path",{d:"M16 22V26",stroke:"currentColor",strokeWidth:"2.4",strokeLinecap:"round"}),r.jsx("path",{d:"M11 27A5 5 0 0 0 21 27",stroke:"currentColor",strokeWidth:"2.4",strokeLinecap:"round"}),r.jsx("circle",{cx:"16",cy:"27.5",r:"1.6",fill:"currentColor"})]})}function L(){const{user:e}=i();return x({queryKey:["profile",e==null?void 0:e.id],queryFn:async()=>{if(!e)return null;const{data:t,error:s}=await a.from("profiles").select("*").eq("id",e.id).single();if(s)throw s;return t},enabled:!!e})}function A(){const{user:e}=i();return x({queryKey:["user-providers",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const{data:t,error:s}=await a.from("user_providers").select("*").eq("user_id",e.id).order("connected_at",{ascending:!1});if(s)throw s;return t},enabled:!!e})}function N(){const{user:e}=i(),t=p();return m({mutationFn:async s=>{if(!e)throw new Error("Not authenticated");const{data:o,error:n}=await a.from("profiles").update({preferred_provider:s}).eq("id",e.id).select().single();if(n)throw n;return o},onSuccess:()=>{t.invalidateQueries({queryKey:["profile"]})}})}const d={sm:"h-7 w-7 text-xs",md:"h-9 w-9 text-sm",lg:"h-11 w-11 text-base"};function P({className:e,size:t="md"}){const s=j(),{user:o}=i(),{data:n}=L(),f=y.useMemo(()=>{var u;const l=(o==null?void 0:o.email)||"";return l?(u=l[0])==null?void 0:u.toUpperCase():"U"},[o==null?void 0:o.email]),h=()=>{s(o?"/profile":"/auth")};return r.jsx("button",{type:"button",onClick:h,className:c("inline-flex items-center justify-center rounded-full border border-border/60 bg-background/60 hover:bg-background/80 transition",e),"aria-label":o?"Open profile":"Sign in",title:o?"Profile":"Sign in",children:o?r.jsxs(C,{className:c(d[t],"border border-border/60"),children:[r.jsx(k,{src:(n==null?void 0:n.avatar_url)||void 0}),r.jsx(w,{className:"bg-primary/15 text-primary font-semibold",children:f})]}):r.jsx("span",{className:c(d[t],"inline-flex items-center justify-center"),children:r.jsx(g,{className:"h-4 w-4"})})})}export{M as A,q as C,P,A as a,N as b,L as u};
