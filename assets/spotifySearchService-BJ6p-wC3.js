import{aO as i,aP as l}from"./index-z0nDvu7n.js";const f="https://api.spotify.com/v1";async function u(o,s,a=50,t=0){const e=await i(o);if(!e)return console.warn("No Spotify access token available - user may need to reconnect"),{tracks:[],total:0};try{const c=new URLSearchParams({q:s,type:"track",limit:Math.min(a,50).toString(),offset:Math.max(0,t).toString(),market:"US"}),r=await fetch(`${f}/search?${c}`,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)return r.status===401?console.error("Spotify token invalid - user needs to reconnect"):console.error("Spotify search failed:",r.status,await r.text()),{tracks:[],total:0};const n=await r.json();return{total:n.tracks.total,tracks:n.tracks.items.map(k=>l(k))}}catch(c){return console.error("Error searching Spotify:",c),{tracks:[],total:0}}}async function h(o,s){const a=await i(o);if(!a)return console.warn("No Spotify access token available - user may need to reconnect"),null;try{const t=await fetch(`${f}/tracks/${s}`,{headers:{Authorization:`Bearer ${a}`}});if(!t.ok)return console.error("Spotify track fetch failed:",t.status),null;const e=await t.json();return l(e)}catch(t){return console.error("Error fetching Spotify track:",t),null}}export{h as g,u as s};
